"use strict";var wishlistController=function(){function t(t){function e(){$("#search").keypress(function(e){13==e.which&&(t.redirect("#/search"),$(".navbar-collapse").collapse("hide"))})}function i(t){var e=firebase.database().ref().child("wishlist").child(t);$(".remove").on("click",function(){var t=$(this),i=t.next().html();e.child(i).remove(),e.off(),location.reload()})}function a(t){var e=$(".add-to-cart"),i=carty({storage:carty.storage.localStorage(),currency:"USD"});e.on("click",function(){var t=$(this),e=t.parents(".cartItem"),a=e.find("#price").html(),r=e.find("#title").html(),n=e.find("#author").html(),l=e.find("#image").attr("src"),c=e.find("#title").attr("href");i.add({id:r,label:n,price:a,quantity:1,author:n,title:r,imageUrl:l,itemUrl:c}),toastr.success(r+" is added to your cart")})}firebase.auth().onAuthStateChanged(function(r){if(r){var n=firebase.auth().currentUser,l=n.uid,c=firebase.database().ref().child("wishlist").child(l);c.on("value",function(r){templates.get("wishlist").then(function(n){t.$element().html(n(r.val())),c.off("value"),i(l),e(),a(l)})})}else templates.get("wishlist").then(function(i){t.$element().html(i()),e()})})}return{wishlist:t}}();